<!DOCTYPE html>
<html lang="fr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Dossier Agent :: NYX_BLACKWOOD</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <link rel="stylesheet" href="../style-nyx.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Roboto+Mono:wght@400;700&family=Share+Tech+Mono&display=swap" rel="stylesheet">
    
    <style>
        /* Styles spécifiques pour les liens secrets */
        .link-secret {
            cursor: pointer;
            position: relative;
        }
        .link-secret:hover::after {
            content: " [LOCKED]";
            color: #ef4444; /* Rouge */
        }
    </style>
</head>
<body class="text-green-400 min-h-screen p-4 md:p-8 scanline bg-black">

    <div class="max-w-6xl mx-auto border-2 border-green-700/50 shadow-2xl shadow-green-900/50 bg-black/80">
        <header class="font-tech text-lg md:text-xl p-4 bg-green-900/30 border-b-2 border-green-700/50 flex justify-between items-center">
            <span>[TERMINAL SÉCURISÉ // ACCÈS NIVEAU 3 REQUIS]</span>
            <span class="text-red-500 animate-pulse">● REC</span>
        </header>

        <div class="p-6 md:p-8 space-y-8">
            
            <div>
                <span class="text-green-300">$</span> <span class="text-white">load --dossier=AGENT_BLACKWOOD_NYX</span>
                <p class="text-cyan-400">... Chargement du dossier ...</p>
                <p class="text-green-400">Authentification réussie. Affichage des données publiques.</p>
                <span class="text-green-300">$</span> <span class="cursor-blink"></span>
            </div>

            <section class="border border-green-600/30 p-4 rounded-lg bg-black/20">
                <h2 class="font-tech text-2xl text-white mb-4">[SECTION 01 : IDENTIFICATION PUBLIQUE]</h2>
                <div class="flex flex-wrap md:flex-nowrap gap-6">
                    <div class="flex-grow space-y-4">
                        <div><p class="text-slate-400">NOM DE L'AGENT :</p><p class="text-xl text-white">BLACKWOOD, NYX</p></div>
                        <div><p class="text-slate-400">ALIAS CONNUS :</p><p class="text-xl text-white">"ZERO", "NULL", "GHOST"</p></div>
                        <div><p class="text-slate-400">STATUT ACTUEL :</p><p class="text-xl text-yellow-400">ACTIF (NON-SANCTIONNÉ)</p></div>
                        <div><p class="text-slate-400">NIVEAU DE MENACE :</p><p class="text-xl text-red-500">VARIABLE (ÉLEVÉ)</p></div>
                    </div>
                    <div class="flex-shrink-0">
                        <div class="border-2 border-red-500/50 p-2 w-32 h-32 flex items-center justify-center bg-red-900/20 text-center flex-col">
                            <span class="text-red-500 font-bold">[IMAGE CORROMPUE]</span>
                            <p class="text-xs text-red-400 mt-2 animate-pulse">ERR_404</p>
                        </div>
                    </div>
                </div>
            </section>

            <div class="w-full border-t border-dashed border-green-800 my-4"></div>

            <section class="border border-green-600/30 p-4 rounded-lg bg-black/20">
                <h2 class="font-tech text-2xl text-white mb-4">[SECTION 02 : PROFIL PHYSIQUE & PSYCHOLOGIQUE]</h2>
                <div class="grid grid-cols-1 md:grid-cols-3 gap-6">
                    <div>
                        <h3 class="text-xl text-cyan-400 font-tech mb-2">// PHYSIQUE</h3>
                        <ul class="list-none space-y-1">
                            <li><span class="text-slate-400">TAILLE:</span> 1m66</li>
                            <li><span class="text-slate-400">CHEVEUX:</span> Blonds</li>
                            <li><span class="text-slate-400">YEUX:</span> Bleus</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl text-green-400 font-tech mb-2">// QUALITÉS (ASSETS)</h3>
                        <ul class="list-none space-y-1">
                            <li>Loyale</li><li>Perspicace</li><li>Disciplinée</li><li>Analytique</li>
                        </ul>
                    </div>
                    <div>
                        <h3 class="text-xl text-yellow-400 font-tech mb-2">// DÉFAUTS (LIABILITIES)</h3>
                        <ul class="list-none space-y-1">
                            <li>Peureuse</li>
                        </ul>
                    </div>
                </div>
            </section>

            <div class="w-full border-t border-dashed border-green-800 my-4"></div>

            <section class="border border-red-600/30 p-4 rounded-lg bg-red-900/10">
                <h2 class="font-tech text-2xl text-red-400 mb-4">[SECTION 03 : HISTORIQUE - NIVEAU 5 REQUIS]</h2>
                <div class="bg-black/30 p-4 rounded">
                    <p class="text-red-400 mb-2">[ACCÈS VERROUILLÉ - CHIFFREMENT AES-256]</p>
                    <p class="encrypted text-sm select-none font-mono text-red-900/50 md:text-red-400/30 break-words">
                        Nyx Blackwood (née le 27 mai 1999) est l'enfant prodige d'une dynastie technologique... 
                        b8 00 00 00 b8 00 00 00 00 00 00 00 00 00 00 00
                        ...Suite à certaines "découvertes" troublantes...
                        48 65 6c 6c 6f 20 57 6f 72 6c 64 21 0a 00 00 00
                        ...elle décida de s'émanciper et de couper les ponts...
                        31 32 33 34 35 36 37 38 39 30 00 00 00 00 00 00
                        ...Cherchant à repartir de zéro... 
                        f0 9f 92 bb f0 9f 92 bb f0 9f 92 bb 00 00 00 00
                        ...<span class="data-glitched-random">[DONNÉES CORROMPUES]</span>...
                    </p>
                </div>
            </section>

            <section class="border border-yellow-600/30 p-4 rounded-lg bg-yellow-900/10">
                <h2 class="font-tech text-2xl text-yellow-400 mb-4">[SECTION 04 : COMPÉTENCES & OPÉRATIONS - NIVEAU 7 REQUIS]</h2>
                <div class="bg-black/30 p-4 rounded">
                    <p class="text-yellow-400 mb-2">[ACCÈS VERROUILLÉ - CLÉ DE DÉCHIFFREMENT MANQUANTE]</p>
                    
                    <p class="encrypted text-sm select-none font-mono text-yellow-700/50">
                        [FICHIER: operations_datahaven.log]...<br>
                        2f 2f 20 43 6f 6d 70 65 74 65 6e 63 65 73 20...<br>
                        <span id="trigger-secret" class="link-secret text-yellow-400/80 hover:text-red-400 transition-colors">[FICHIER: analyse_psy_cortex.dat]</span>...<br>
                        ...<span class="data-glitched-random"></span>...<br>
                        ...<span class="data-glitched-random"></span>...<br>
                        [FICHIER: contacts_actifs.db] (Verrouillé)...<br>
                        01 00 00 00 00 00 00 00 00 00 00 00 00 00 00 00
                    </p>
                </div>
            </section>

             <div>
                <span class="text-green-300">$</span> <span class="text-white">exit</span>
                <p class="text-red-500">... Déconnexion ...</p>
                
                <div class="mt-8 text-center border-t border-green-700/50 pt-4">
                    <a href="../database.html" class="font-tech text-green-400 hover:text-white hover:bg-green-700 p-2 transition-all inline-block">
                        &lt;&lt; RETURN_TO_DATABASE
                    </a>
                </div>
            </div>

        </div>
    </div>

    <script>
        document.addEventListener('DOMContentLoaded', () => {
            // --- EFFETS GLITCH (inchangé) ---
            const glitchElements = document.querySelectorAll('.data-glitched-random');
            const chars = 'ABCDEF0123456789<>!@#$%^&*()_+[]{}|;:,./?';

            setInterval(() => {
                glitchElements.forEach(el => {
                    el.textContent = Array.from({length: Math.floor(Math.random() * 10) + 8}, () => chars.charAt(Math.floor(Math.random() * chars.length))).join('');
                });
            }, 150);

            // --- GESTION DU CLIC SUR LE LIEN SECRET ---
            const trigger = document.getElementById('trigger-secret');
            
            if (trigger) {
                trigger.addEventListener('click', async (e) => {
                    e.preventDefault(); 

                    const password = prompt(">> ACCÈS RESTREINT NIVEAU 7 <<\nVEUILLEZ ENTRER LE CODE DE DÉCHIFFREMENT :");
                    
                    if (password) {
                        // Feedback visuel style terminal pendant le chargement
                        document.body.innerHTML = `
                            <div style="color:#0f0; font-family:'Share Tech Mono', monospace; padding:20px; background:#000; height:100vh; font-size:1.2rem;">
                                > INITIALISATION DU PROTOCOLE DE SÉCURITÉ...<br>
                                > ENVOI DU HASH D'AUTHENTIFICATION...<br>
                                <span class="animate-pulse">_</span>
                            </div>`;

                        try {
                            // APPEL À L'API UNIFIÉE
                            // On spécifie mode: 'file_access' pour que le serveur sache quoi faire
                            const response = await fetch('/api/login', {
                                method: 'POST',
                                headers: { 'Content-Type': 'application/json' },
                                body: JSON.stringify({ 
                                    mode: 'file_access', 
                                    password: password 
                                })
                            });

                            const data = await response.json();

                            if (response.ok && data.success && data.redirect) {
                                // SUCCÈS : Le serveur a validé le mot de passe
                                document.body.innerHTML = `
                                    <div style="color:#0f0; font-family:'Share Tech Mono', monospace; padding:20px; background:#000; height:100vh; font-size:1.2rem;">
                                        > AUTHENTIFICATION RÉUSSIE.<br>
                                        > DÉVERROUILLAGE DU FICHIER [analyse_psy_cortex.dat]...<br>
                                        > REDIRECTION EN COURS...
                                    </div>`;
                                
                                setTimeout(() => {
                                    window.location.href = data.redirect;
                                }, 1500);

                            } else {
                                // ÉCHEC : Mot de passe incorrect
                                alert("!!! ACCÈS REFUSÉ !!!\nTERMINAL RÉPOND : " + (data.message || "CODE INVALIDE"));
                                window.location.reload(); // Recharge la page pour revenir à l'état normal
                            }

                        } catch (error) {
                            console.error('Erreur critique:', error);
                            alert("ERREUR CRITIQUE : IMPOSSIBLE DE JOINDRE LE SERVEUR CENTRAL.");
                            window.location.reload();
                        }
                    }
                });
            }
        });
    </script>
</body>
</html>